import{r as y,u as v,j as e,H as N,a as w}from"./app-D6i_jFMs.js";import{A}from"./AuthenticatedLayout-C37UIVzY.js";import{A as k}from"./index-DnqEZftT.js";import{m as C}from"./proxy-CX5w4x56.js";import"./transition-Bb4lxOHg.js";function L({auth:_,event:a,stats:i}){const[p,d]=y.useState(!1),{data:r,setData:l,post:m,processing:c,reset:b,errors:o}=v({group_name:"",total_passes:1,members:[{name:""}]}),u=()=>{l("members",[...r.members,{name:""}])},g=t=>{const s=r.members.filter((x,n)=>n!==t);l("members",s)},h=t=>{t.preventDefault(),m(route("guests.store",a.id),{onSuccess:()=>{d(!1),b()}})},f=t=>{confirm("¿Estás seguro de eliminar este invitado?")&&w.delete(route("guests.destroy",[a.id,t]))},j=t=>{const s=`${window.location.origin}/${a.slug}?g=${t}`;navigator.clipboard.writeText(s),alert("Enlace copiado al portapapeles")};return e.jsxs(A,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-[#1A1A1A] font-serif",children:["Lista de Invitados: ",a.name]}),e.jsx("button",{onClick:()=>d(!0),className:"bg-[#C5A059] text-white px-6 py-2 font-sans uppercase tracking-widest text-[10px] hover:bg-[#1A1A1A] transition-all",children:"+ Nuevo Grupo"})]}),children:[e.jsx(N,{title:"Gestión de Invitados"}),e.jsx("div",{className:"py-12 bg-[#F9F9F7]",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-8",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[{label:"Grupos",value:i.total_groups},{label:"Invitados Totales",value:i.total_guests},{label:"Confirmados",value:i.confirmed_guests,color:"text-green-600"},{label:"Pendientes",value:i.pending_guests,color:"text-amber-600"}].map((t,s)=>e.jsxs("div",{className:"bg-white p-6 border border-[#E0E0E0] shadow-sm",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 mb-2 font-bold",children:t.label}),e.jsx("p",{className:`text-3xl font-serif ${t.color||"text-[#1A1A1A]"}`,children:t.value})]},s))}),e.jsx("div",{className:"bg-white border border-[#E0E0E0] shadow-sm overflow-hidden",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-[#E0E0E0]",children:[e.jsx("th",{className:"px-6 py-4 text-[10px] uppercase tracking-widest text-gray-400 font-bold",children:"Grupo / Familia"}),e.jsx("th",{className:"px-6 py-4 text-[10px] uppercase tracking-widest text-gray-400 font-bold",children:"Pases"}),e.jsx("th",{className:"px-6 py-4 text-[10px] uppercase tracking-widest text-gray-400 font-bold",children:"Estado"}),e.jsx("th",{className:"px-6 py-4 text-[10px] uppercase tracking-widest text-gray-400 font-bold",children:"Link Personalizado"}),e.jsx("th",{className:"px-6 py-4 text-[10px] uppercase tracking-widest text-gray-400 font-bold text-right",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[a.guest_groups.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-serif text-lg text-[#1A1A1A]",children:t.group_name}),e.jsxs("div",{className:"text-[10px] text-gray-400 font-sans uppercase tracking-widest",children:[t.members?.length||0," integrantes registrados"]})]}),e.jsx("td",{className:"px-6 py-4 font-sans text-sm",children:t.total_passes}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[9px] uppercase tracking-widest px-2 py-1 font-bold ${t.status==="confirmed"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:t.status==="confirmed"?"Confirmado":"Pendiente"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-100 px-3 py-1 rounded text-[10px] text-gray-500 font-mono truncate max-w-[150px]",children:[a.slug,"?g=",t.slug]}),e.jsx("button",{onClick:()=>j(t.slug),className:"text-[#C5A059] hover:text-[#1A1A1A] transition-colors p-1",title:"Copiar Enlace",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>f(t.id),className:"text-[10px] uppercase tracking-widest text-red-300 hover:text-red-600 font-bold transition-colors",children:"Eliminar"})})]},t.id)),a.guest_groups.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-20 text-center italic text-gray-400 font-serif",children:"Aún no hay invitados registrados."})})]})]})})]})}),e.jsx(k,{children:p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm",children:e.jsxs(C.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white w-full max-w-2xl p-8 md:p-12 shadow-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>d(!1),className:"absolute top-8 right-8 text-2xl text-gray-400 hover:text-black",children:"×"}),e.jsx("h3",{className:"text-3xl font-serif mb-8 border-b border-gray-100 pb-4 text-[#1A1A1A]",children:"Nuevo Grupo de Invitados"}),e.jsxs("form",{onSubmit:h,className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-widest text-[#888888] mb-2 font-bold",children:"Nombre del Grupo / Familia"}),e.jsx("input",{type:"text",value:r.group_name,onChange:t=>l("group_name",t.target.value),className:"w-full border-0 border-b border-gray-200 focus:border-[#C5A059] focus:ring-0 font-serif text-xl p-0 py-2 bg-transparent",placeholder:"Ej: Familia Castillo",required:!0}),o.group_name&&e.jsx("div",{className:"text-red-500 text-[10px] mt-1 uppercase",children:o.group_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-widest text-[#888888] mb-2 font-bold",children:"Pases de Cortesía"}),e.jsx("input",{type:"number",min:"1",value:r.total_passes,onChange:t=>l("total_passes",t.target.value),className:"w-full border-0 border-b border-gray-200 focus:border-[#C5A059] focus:ring-0 font-sans text-xl p-0 py-2 bg-transparent"}),o.total_passes&&e.jsx("div",{className:"text-red-500 text-[10px] mt-1 uppercase",children:o.total_passes})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-[#888888] font-bold",children:"Integrantes Individuales"}),e.jsx("button",{type:"button",onClick:u,className:"text-[#C5A059] text-[10px] font-bold uppercase tracking-widest hover:text-[#1A1A1A] transition-colors",children:"+ Añadir Integrante"})]}),e.jsx("div",{className:"grid gap-4 max-h-60 overflow-y-auto pr-2",children:r.members.map((t,s)=>e.jsxs("div",{className:"flex gap-4 items-center group",children:[e.jsx("input",{type:"text",placeholder:`Nombre del invitado ${s+1}`,value:t.name,onChange:x=>{const n=[...r.members];n[s].name=x.target.value,l("members",n)},className:"flex-1 border-0 border-b border-gray-100 focus:border-[#C5A059] focus:ring-0 text-sm p-0 py-2 bg-transparent",required:!0}),r.members.length>1&&e.jsx("button",{type:"button",onClick:()=>g(s),className:"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"×"})]},s))})]}),e.jsx("div",{className:"flex justify-end pt-8",children:e.jsx("button",{type:"submit",disabled:c,className:"bg-[#1A1A1A] text-white px-12 py-4 font-sans uppercase tracking-[0.2em] text-[10px] hover:bg-[#C5A059] transition-all disabled:opacity-50 shadow-xl",children:c?"Guardando...":"Registrar Invitado"})})]})]})})})]})}export{L as default};
