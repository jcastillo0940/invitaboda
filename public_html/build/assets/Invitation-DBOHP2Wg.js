import{r as h,j as e,u as k,H as C}from"./app-CKvo3YMG.js";import{T as F}from"./TemplateLoader-KsL8PIws.js";import{A as x}from"./index-BmD7pytL.js";import{m as a}from"./proxy-C3rojBCA.js";function E({initials:l,onOpen:o,enabled:b,mainColor:f="#C5A059"}){const[s,p]=h.useState(!1),[m,g]=h.useState(!1);if(!b||m)return null;const y=()=>{p(!0),setTimeout(()=>{g(!0),o&&o()},2200)};return e.jsx(x,{children:!m&&e.jsxs(a.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1},className:"fixed inset-0 z-[100] flex items-center justify-center overflow-hidden bg-[#FDFBF7]",style:{backgroundImage:"radial-gradient(circle at center, #ffffff 0%, #FDFBF7 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"url('https://www.transparenttextures.com/patterns/linen-paper.png')"}}),e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4 md:p-12 cursor-pointer perspective-2000",onClick:y,children:[e.jsx(a.div,{animate:{scale:s?1.1:1,opacity:s?.2:.4},className:"absolute w-[80%] max-w-[500px] aspect-[4/3] bg-black/20 blur-[60px] rounded-[100%] translate-y-10"}),e.jsx(a.div,{initial:{y:50,opacity:0,rotateX:5},animate:{y:0,opacity:1,rotateX:0},transition:{duration:1,ease:"easeOut"},className:"relative w-full max-w-[550px] aspect-[4/3] z-10",children:e.jsxs("div",{className:"absolute inset-0 bg-[#F4F1EA] shadow-xl border border-[#E8E4D9]",children:[e.jsxs(a.div,{animate:{y:s?"-90%":"5%",scale:s?1.02:.98,zIndex:s?40:5},transition:{delay:.6,duration:1.2,ease:"easeInOut"},className:"absolute inset-x-4 top-0 h-[90%] bg-white shadow-md border border-gray-100 p-8 flex flex-col items-center justify-start text-center",children:[e.jsx("div",{className:"w-16 h-px bg-[#C5A059]/30 mb-6"}),e.jsx("p",{className:"text-[10px] uppercase tracking-[0.5em] text-[#C5A059] mb-4",children:"You are invited"}),e.jsx("h2",{className:"text-4xl font-serif italic text-gray-800 mb-2",children:"Our Wedding"}),e.jsx("div",{className:"w-8 h-8 rounded-full border border-gray-100 flex items-center justify-center mt-auto",children:e.jsx("span",{className:"text-[8px] text-gray-300",children:"♥"})})]}),e.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 550 412.5",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0 0 L275 220 L0 412.5 Z",fill:"#FAF8F5",stroke:"#E8E4D9",strokeWidth:"0.5"}),e.jsx("path",{d:"M550 0 L275 220 L550 412.5 Z",fill:"#FAF8F5",stroke:"#E8E4D9",strokeWidth:"0.5"}),e.jsx("path",{d:"M0 412.5 L275 210 L550 412.5 Z",fill:"#F4F1EA",stroke:"#E8E4D9",strokeWidth:"0.5"})]})}),e.jsxs(a.div,{animate:{rotateX:s?-175:0,zIndex:s?0:30},transition:{duration:.9,ease:"easeInOut"},style:{transformOrigin:"top"},className:"absolute inset-x-0 top-0 h-[55%] pointer-events-none",children:[e.jsx("svg",{className:"w-full h-full drop-shadow-lg",viewBox:"0 0 550 226.8",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0 0 L275 226.8 L550 0 Z",fill:"#F4F1EA",stroke:"#E8E4D9",strokeWidth:"1"})}),e.jsx(x,{children:!s&&e.jsx(a.div,{exit:{opacity:0,scale:.8},className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 w-16 h-16 pointer-events-auto",children:e.jsxs("div",{className:"w-full h-full rounded-full shadow-2xl flex items-center justify-center border-2 border-white/20 relative",style:{backgroundColor:f,backgroundImage:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%)"},children:[e.jsx("div",{className:"absolute inset-1.5 rounded-full border border-white/10"}),e.jsx("span",{className:"text-white font-serif text-lg tracking-tighter drop-shadow-md select-none",children:l||"A&B"})]})})})]})]})}),e.jsx(x,{children:!s&&e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute bottom-16 left-0 right-0 text-center z-50 px-6",children:[e.jsx(a.p,{animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:2.5},className:"text-[10px] uppercase tracking-[0.6em] text-[#C5A059] font-bold mb-4",children:"Haz clic para abrir"}),e.jsx("div",{className:"w-px h-12 bg-gradient-to-b from-[#C5A059] to-transparent mx-auto"})]})})]})]})})}function I({event:l,guestGroup:o}){const[b,f]=h.useState(!1),[s,p]=h.useState(!1),{data:m,setData:g,post:y,processing:j,recentlySuccessful:v}=k({members:o?.members.map(t=>({id:t.id,name:t.name,is_attending:t.is_attending??!0,menu_choice:t.menu_choice||"",drink_choice:t.drink_choice||"",allergies:t.allergies||""}))||[]}),u=(t,d,n)=>{const A=[...m.members];A[t][d]=n,g("members",A)},N=t=>{t.preventDefault(),y(route("rsvp.submit",o.id),{onSuccess:()=>p(!1)})},i={primaryNames:l.name||"",date:l.date||"",location:"",locationUrl:"",reception:"",receptionUrl:"",heroImageUrl:"",heroVideoUrl:"",gallery:[],itinerary:[],musicUrl:"",showCountdown:!0,envelopeAnimation:{enabled:!0,initials:""},parents:{bride:{father:"",mother:""},groom:{father:"",mother:""}},ourStory:"",godparents:[],quote:"",weather:{enabled:!1,city:"",apiKey:"",lat:null,lng:null},giftSettings:{type:"none",registryUrl:"",bankDetails:"",freeText:""},contact:{label:"Contacto",phone:"",whatsapp:""},accommodation:[],songSuggestions:!1,guestBook:!1,dressCode:{type:"formal",customText:""},hashtag:"",calendarEnabled:!0,rsvpOptions:{askMenu:!1,askDrinks:!1,menuOptions:"",drinkOptions:"",askAllergies:!0},mainColor:"#C5A059",secondaryColor:"#1A1A1A"},r=l.design?.design_data||{},c={...i,...r,envelopeAnimation:{...i.envelopeAnimation,...r.envelopeAnimation||{}},parents:{bride:{...i.parents.bride,...r.parents?.bride||{}},groom:{...i.parents.groom,...r.parents?.groom||{}}},weather:{...i.weather,...r.weather||{}},giftSettings:{...i.giftSettings,...r.giftSettings||{}},contact:{...i.contact,...r.contact||{}},dressCode:{...i.dressCode,...r.dressCode||{}},rsvpOptions:{...i.rsvpOptions,...r.rsvpOptions||{}}},w=c.rsvpOptions||{askMenu:!1};return e.jsxs("div",{className:"min-h-screen bg-[#F5F5F0] text-[#333333] font-serif selection:bg-[#C5A059] selection:text-white overflow-x-hidden",children:[e.jsx(C,{title:`Boda - ${l.name}`}),e.jsx(E,{initials:c.envelopeAnimation?.initials,enabled:c.envelopeAnimation?.enabled,onOpen:()=>f(!0),mainColor:c.mainColor}),e.jsx(x,{children:(b||!c.envelopeAnimation?.enabled)&&e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1},className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"relative z-10",children:e.jsx(F,{slug:l.design?.template_name,data:c,guestGroup:o,event:l})}),o&&!s&&!v&&e.jsx(a.div,{initial:{y:100},animate:{y:0},className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-40",children:e.jsx("button",{onClick:()=>p(!0),className:"bg-[#1A1A1A] text-white px-12 py-5 font-sans uppercase tracking-[0.3em] text-[10px] hover:bg-[#C5A059] transition-all shadow-2xl rounded-full border border-white/10 backdrop-blur-sm bg-opacity-90",children:"Confirmar Asistencia"})}),v&&e.jsxs("div",{className:"bg-white py-20 px-6 text-center border-t border-[#C5A059]",children:[e.jsx("h3",{className:"text-3xl italic text-[#C5A059] mb-4",children:"¡Gracias por confirmar!"}),e.jsx("p",{className:"text-gray-400 font-sans text-xs uppercase tracking-widest",children:"Hemos recibido tu respuesta con éxito."})]}),e.jsx(x,{children:s&&e.jsx(a.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"fixed inset-0 z-[60] bg-white overflow-y-auto",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-12",children:[e.jsx("h3",{className:"text-3xl font-serif text-[#1A1A1A]",children:"Confirmar Asistencia"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-black font-sans text-xs uppercase tracking-widest",children:"Cerrar ×"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-12",children:[m.members.map((t,d)=>e.jsxs("div",{className:"pb-12 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"md:flex justify-between items-center mb-6 space-y-4 md:space-y-0",children:[e.jsx("h4",{className:"text-xl italic text-[#1A1A1A]",children:t.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u(d,"is_attending",!0),className:`flex-1 md:flex-none px-6 py-3 text-[10px] uppercase tracking-widest border transition-all ${t.is_attending?"bg-[#1A1A1A] text-white border-[#1A1A1A]":"border-gray-200 text-gray-400"}`,children:"Asistiré"}),e.jsx("button",{type:"button",onClick:()=>u(d,"is_attending",!1),className:`flex-1 md:flex-none px-6 py-3 text-[10px] uppercase tracking-widest border transition-all ${t.is_attending?"border-gray-200 text-gray-400":"bg-red-500 text-white border-red-500"}`,children:"No asistiré"})]})]}),e.jsx(x,{children:t.is_attending&&e.jsxs(a.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"grid md:grid-cols-2 gap-6 overflow-hidden",children:[w.askMenu&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] uppercase tracking-widest text-gray-400 mb-2 font-bold",children:"Elección de Menú"}),e.jsxs("select",{value:t.menu_choice,onChange:n=>u(d,"menu_choice",n.target.value),className:"w-full border-0 border-b border-gray-100 focus:border-[#C5A059] focus:ring-0 text-sm p-0 py-2",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),w.menuOptions.split(",").map(n=>e.jsx("option",{value:n.trim(),children:n.trim()},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] uppercase tracking-widest text-gray-400 mb-2 font-bold",children:"Alergias / Notas"}),e.jsx("input",{type:"text",value:t.allergies,onChange:n=>u(d,"allergies",n.target.value),className:"w-full border-0 border-b border-gray-100 focus:border-[#C5A059] focus:ring-0 text-sm p-0 py-2",placeholder:"Ej: Gluten, Lactosa..."})]})]})})]},t.id)),e.jsx("div",{className:"pt-12",children:e.jsx("button",{disabled:j,className:"w-full bg-[#1A1A1A] text-white py-5 font-sans uppercase tracking-[0.4em] text-xs hover:bg-[#C5A059] transition-all shadow-2xl",children:j?"Procesando...":"Confirmar Todo"})})]})]})})})]})})]})}export{I as default};
