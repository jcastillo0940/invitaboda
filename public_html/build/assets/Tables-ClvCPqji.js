import{r as g,u as f,j as e,H as j,a as l}from"./app-CKvo3YMG.js";import{A as y}from"./AuthenticatedLayout-CttmCh-1.js";import{A as N}from"./index-BmD7pytL.js";import{m as v}from"./proxy-C3rojBCA.js";import"./transition-Bv1B2sSu.js";function L({auth:w,event:t,unassignedMembers:i}){const[d,r]=g.useState(!1),{data:n,setData:c,post:o,processing:x,reset:m,errors:A}=f({name:"",capacity:10}),p=s=>{s.preventDefault(),o(route("tables.store",t.id),{onSuccess:()=>{r(!1),m()}})},h=(s,a)=>{l.post(route("tables.assign",[t.id,a]),{member_id:s})},b=s=>{l.post(route("tables.unassign",[t.id,s]))},u=s=>{confirm("¿Eliminar esta mesa? Los invitados quedarán sin asignar.")&&l.delete(route("tables.destroy",[t.id,s]))};return e.jsxs(y,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-[#1A1A1A] font-serif",children:["Asignación de Mesas: ",t.name]}),e.jsx("button",{onClick:()=>r(!0),className:"bg-[#C5A059] text-white px-6 py-2 font-sans uppercase tracking-widest text-[10px] hover:bg-[#1A1A1A] transition-all",children:"+ Nueva Mesa"})]}),children:[e.jsx(j,{title:"Gestión de Mesas"}),e.jsx("div",{className:"py-12 bg-[#F9F9F7] min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.tables.map(s=>e.jsxs("div",{className:"bg-white border border-[#E0E0E0] shadow-sm p-6 relative group",children:[e.jsx("button",{onClick:()=>u(s.id),className:"absolute top-4 right-4 text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-serif text-[#1A1A1A]",children:s.name}),e.jsxs("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-bold",children:["Capacidad: ",s.members.length," / ",s.capacity]})]}),e.jsxs("div",{className:"space-y-2 min-h-[100px] border-2 border-dashed border-gray-50 rounded-lg p-2",children:[s.members.map(a=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded group/item",children:[e.jsx("span",{className:"text-sm font-sans text-gray-700",children:a.name}),e.jsx("button",{onClick:()=>b(a.id),className:"text-gray-300 hover:text-red-500 transition-colors",children:"×"})]},a.id)),s.members.length===0&&e.jsx("div",{className:"h-full flex items-center justify-center py-8",children:e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-gray-300",children:"Vacía"})})]})]},s.id))}),t.tables.length===0&&e.jsxs("div",{className:"bg-white border border-dashed border-gray-300 rounded-2xl p-20 text-center",children:[e.jsx("h3",{className:"text-2xl font-serif text-gray-300 mb-4",children:"No has creado mesas aún"}),e.jsx("button",{onClick:()=>r(!0),className:"text-[#C5A059] font-sans uppercase tracking-widest text-xs font-bold",children:"Comenzar a organizar →"})]})]}),e.jsx("div",{className:"w-full lg:w-80",children:e.jsxs("div",{className:"bg-white border border-[#E0E0E0] shadow-sm sticky top-8",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h4",{className:"text-[10px] uppercase tracking-[0.2em] font-bold text-[#1A1A1A]",children:"Invitados Pendientes"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[i.length," por ubicar"]})]}),e.jsxs("div",{className:"max-h-[600px] overflow-y-auto p-4 space-y-2",children:[i.map(s=>e.jsxs("div",{className:"bg-[#FAF9F6] p-4 border border-gray-100",children:[e.jsx("p",{className:"text-sm font-serif mb-3",children:s.name}),e.jsxs("select",{className:"w-full text-[10px] uppercase tracking-widest font-bold border-gray-200 focus:border-[#C5A059] focus:ring-0 rounded-none bg-white p-2",onChange:a=>h(s.id,a.target.value),value:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Asignar a..."}),t.tables.map(a=>e.jsxs("option",{value:a.id,disabled:a.members.length>=a.capacity,children:[a.name," (",a.members.length,"/",a.capacity,")"]},a.id))]})]},s.id)),i.length===0&&e.jsx("div",{className:"py-10 text-center",children:e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-[#C5A059] font-bold",children:"¡Todo organizado!"})})]})]})})]})})}),e.jsx(N,{children:d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm",children:e.jsxs(v.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white w-full max-w-md p-10 shadow-2xl relative",children:[e.jsx("button",{onClick:()=>r(!1),className:"absolute top-6 right-6 text-2xl text-gray-400 hover:text-black",children:"×"}),e.jsx("h3",{className:"text-3xl font-serif mb-8 text-[#1A1A1A] border-b border-gray-100 pb-4",children:"Configurar Mesa"}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-widest text-[#888888] mb-2 font-bold",children:"Nombre o Número"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>c("name",s.target.value),className:"w-full border-0 border-b border-gray-200 focus:border-[#C5A059] focus:ring-0 font-serif text-xl p-0 py-2 bg-transparent",placeholder:"Mesa 1, VIP, etc.",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-widest text-[#888888] mb-2 font-bold",children:"Capacidad Máxima"}),e.jsx("input",{type:"number",min:"1",value:n.capacity,onChange:s=>c("capacity",s.target.value),className:"w-full border-0 border-b border-gray-200 focus:border-[#C5A059] focus:ring-0 font-sans text-xl p-0 py-2 bg-transparent"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:x,className:"bg-[#1A1A1A] text-white px-10 py-4 font-sans uppercase tracking-[0.2em] text-[10px] hover:bg-[#C5A059] transition-all shadow-xl disabled:opacity-50",children:"Crear Mesa"})})]})]})})})]})}export{L as default};
